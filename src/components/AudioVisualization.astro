---
interface Props {
  title: string;
  description?: string;
  type: 'waveform' | 'spectrogram';
  placeholderText?: string;
  className?: string;
}

const { 
  title, 
  description = "", 
  type = "waveform", 
  placeholderText = "Visualización próximamente", 
  className = "h-48" 
} = Astro.props;
---

<div class={`audio-visualization ${className}`}>
  <h4 class="text-lg font-medium mb-2 text-green-400">{title}</h4>
  
  <div class="relative bg-black/40 rounded-lg overflow-hidden border border-gray-700 flex items-center justify-center p-2 mb-3" 
       class:list={[className]}>
    <!-- SVG visualization placeholder based on type -->
    {type === 'waveform' && (
      <div class="absolute inset-0 flex items-center justify-center">
        <svg viewBox="0 0 100 30" class="w-full h-full opacity-40">
          <path d="M0,15 Q5,5 10,15 T20,15 T30,15 T40,15 T50,15 T60,15 T70,15 T80,15 T90,15 T100,15" 
                fill="none" 
                stroke="#5cb85c" 
                stroke-width="0.5" />
          <path d="M0,15 Q5,10 10,15 T20,15 T30,20 T40,10 T50,15 T60,15 T70,5 T80,15 T90,20 T100,15" 
                fill="none" 
                stroke="#5cb85c" 
                stroke-width="1" />
          <path d="M0,15 Q5,5 10,15 T20,25 T30,5 T40,15 T50,25 T60,5 T70,15 T80,25 T90,5 T100,15" 
                fill="none" 
                stroke="#5cb85c" 
                stroke-width="1.5" />
        </svg>
      </div>
    )}
    
    {type === 'spectrogram' && (
      <div class="absolute inset-0 flex items-center justify-center">
        <svg viewBox="0 0 100 50" class="w-full h-full opacity-40">
          <defs>
            <linearGradient id="specGradient" x1="0%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" stop-color="#1dd13f" stop-opacity="1" />
              <stop offset="50%" stop-color="#5cb85c" stop-opacity="0.6" />
              <stop offset="100%" stop-color="#3a8a3a" stop-opacity="0.2" />
            </linearGradient>
          </defs>
          
          <!-- Frequency bands -->
          <rect x="0" y="0" width="10" height="50" fill="url(#specGradient)" opacity="0.7" />
          <rect x="10" y="0" width="10" height="50" fill="url(#specGradient)" opacity="0.5" />
          <rect x="20" y="0" width="10" height="50" fill="url(#specGradient)" opacity="0.9" />
          <rect x="30" y="0" width="10" height="50" fill="url(#specGradient)" opacity="0.4" />
          <rect x="40" y="0" width="10" height="50" fill="url(#specGradient)" opacity="0.6" />
          <rect x="50" y="0" width="10" height="50" fill="url(#specGradient)" opacity="0.8" />
          <rect x="60" y="0" width="10" height="50" fill="url(#specGradient)" opacity="0.3" />
          <rect x="70" y="0" width="10" height="50" fill="url(#specGradient)" opacity="0.7" />
          <rect x="80" y="0" width="10" height="50" fill="url(#specGradient)" opacity="0.5" />
          <rect x="90" y="0" width="10" height="50" fill="url(#specGradient)" opacity="0.9" />
        </svg>
      </div>
    )}
    
    <p class="text-gray-500 text-sm relative z-10">{placeholderText}</p>
  </div>
  
  {description && <p class="text-gray-300 text-sm">{description}</p>}
</div>
